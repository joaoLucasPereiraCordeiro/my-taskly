(function(){var e={477:function(){},9439:function(e,t,a){"use strict";var s=a(5130),o=a(6768),n=a(4232);const l={key:0,class:"d-flex justify-content-center align-items-center min-vh-100"},r={key:1,class:"d-flex min-vh-100"},i={key:0,class:"p-4 position-fixed top-0 start-0 h-100 d-none d-md-flex flex-column justify-content-between border-secondary",style:{width:"16rem"}},c={class:"list-unstyled"},d={class:"pt-5 d-flex flex-column"},u={class:"custom-btn mb-3"},m={key:0,class:"mobile-menu d-flex flex-column"},k={class:"list-unstyled flex-grow-1"};function h(e,t,a,h,p,b){const f=(0,o.g2)("router-link"),g=(0,o.g2)("router-view"),v=(0,o.g2)("RoboAssistant");return(0,o.uX)(),(0,o.CE)("div",null,[e.isLoading?((0,o.uX)(),(0,o.CE)("div",l,[...t[4]||(t[4]=[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"},"Carregando...")],-1)])])):((0,o.uX)(),(0,o.CE)("div",r,[e.isAuthenticated&&!b.isAdmin?((0,o.uX)(),(0,o.CE)("aside",i,[(0,o.Lk)("div",null,[t[8]||(t[8]=(0,o.Lk)("h2",{class:"h5 fw-bold mb-5 text-black"},[(0,o.eW)(" My Task"),(0,o.Lk)("span",{class:"highlight-cut"},"ly")],-1)),(0,o.Lk)("ul",c,[(0,o.bF)(f,{to:"/home",class:"text-decoration-none fw-medium"},{default:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.Lk)("li",{class:"custom-btn mb-3"},[(0,o.Lk)("i",{class:"fa-solid fa-calendar me-2"}),(0,o.eW)("Entrada ")],-1)])]),_:1}),(0,o.bF)(f,{to:"/calendario",class:"text-decoration-none fw-medium"},{default:(0,o.k6)(()=>[...t[6]||(t[6]=[(0,o.Lk)("li",{class:"custom-btn mb-3"},[(0,o.Lk)("i",{class:"fa-solid fa-calendar me-2"}),(0,o.eW)("CalendÃ¡rio ")],-1)])]),_:1}),(0,o.bF)(f,{to:"/dashboard",class:"text-decoration-none fw-medium"},{default:(0,o.k6)(()=>[...t[7]||(t[7]=[(0,o.Lk)("li",{class:"custom-btn mb-3"},[(0,o.Lk)("i",{class:"fas fa-chart-line me-2"}),(0,o.eW)("Dashboard ")],-1)])]),_:1})])]),(0,o.Lk)("div",d,[(0,o.Lk)("li",u,[(0,o.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,s.D$)((...e)=>b.handleLogout&&b.handleLogout(...e),["prevent"])),class:"text-decoration-none fw-bold"},[...t[9]||(t[9]=[(0,o.Lk)("i",{class:"fas fa-right-from-bracket"},null,-1),(0,o.eW)(" Sair ",-1)])])])])])):(0,o.Q3)("",!0),e.isAuthenticated&&!b.isAdmin?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"mobile-hamburger d-md-none fs-4",type:"button",onClick:t[1]||(t[1]=e=>p.mobileMenuOpen=!p.mobileMenuOpen)},[...t[10]||(t[10]=[(0,o.Lk)("i",{class:"fa-solid fa-bars"},null,-1)])])):(0,o.Q3)("",!0),(0,o.bF)(s.eB,{name:"slide"},{default:(0,o.k6)(()=>[p.mobileMenuOpen?((0,o.uX)(),(0,o.CE)("div",m,[t[15]||(t[15]=(0,o.Lk)("h5",{class:"fw-bold mb-4"},[(0,o.eW)("My Task"),(0,o.Lk)("span",{class:"highlight-cut"},"ly")],-1)),(0,o.Lk)("ul",k,[(0,o.bF)(f,{to:"/home",class:"text-decoration-none fw-medium",onClick:b.closeMobileMenu},{default:(0,o.k6)(()=>[...t[11]||(t[11]=[(0,o.Lk)("li",{class:"custom-btn mb-3"},[(0,o.Lk)("i",{class:"fa-solid fa-calendar me-2"}),(0,o.eW)("Entrada ")],-1)])]),_:1},8,["onClick"]),(0,o.bF)(f,{to:"/calendario",class:"text-decoration-none fw-medium",onClick:b.closeMobileMenu},{default:(0,o.k6)(()=>[...t[12]||(t[12]=[(0,o.Lk)("li",{class:"custom-btn mb-3"},[(0,o.Lk)("i",{class:"fa-solid fa-calendar me-2"}),(0,o.eW)("CalendÃ¡rio ")],-1)])]),_:1},8,["onClick"]),(0,o.bF)(f,{to:"/dashboard",class:"text-decoration-none fw-medium",onClick:b.closeMobileMenu},{default:(0,o.k6)(()=>[...t[13]||(t[13]=[(0,o.Lk)("li",{class:"custom-btn mb-3"},[(0,o.Lk)("i",{class:"fas fa-chart-line me-2"}),(0,o.eW)("Dashboard ")],-1)])]),_:1},8,["onClick"])]),(0,o.Lk)("div",null,[(0,o.Lk)("a",{href:"#",onClick:t[2]||(t[2]=(0,s.D$)((...e)=>b.handleLogout&&b.handleLogout(...e),["prevent"])),class:"text-decoration-none fw-bold"},[...t[14]||(t[14]=[(0,o.Lk)("li",{class:"custom-btn mb-3"},[(0,o.Lk)("i",{class:"fas fa-right-from-bracket"}),(0,o.eW)(" Sair ")],-1)])])])])):(0,o.Q3)("",!0)]),_:1}),(0,o.Lk)("main",{class:"flex-grow-1 overflow-auto bg-light",style:(0,n.Tr)({marginLeft:e.isAuthenticated&&!b.isAdmin?"16rem":"0"}),onClick:t[3]||(t[3]=(...e)=>b.closeMobileMenu&&b.closeMobileMenu(...e))},[(0,o.bF)(g,{tasks:b.tasksFromStore},null,8,["tasks"])],4)])),e.isAuthenticated&&!b.isAdmin?((0,o.uX)(),(0,o.Wv)(v,{key:2})):(0,o.Q3)("",!0)])}a(4114);var p=a(782);const b={key:0,class:"robo-container"},f={class:"robo-message"};function g(e,t,a,s,l,r){return l.falaVisivel?((0,o.uX)(),(0,o.CE)("div",b,[(0,o.Lk)("div",f,[(0,o.Lk)("p",null,(0,n.v_)(l.fala),1),(0,o.Lk)("button",{class:"close-btn",onClick:t[0]||(t[0]=(...e)=>r.fecharMensagem&&r.fecharMensagem(...e))},"Ã—")]),t[1]||(t[1]=(0,o.Lk)("div",{class:"robo-avatar"},[(0,o.Lk)("img",{src:"/img/robo.png",alt:"robo"})],-1))])):(0,o.Q3)("",!0)}var v=a(4373),L={name:"RoboAssistant",data(){return{fala:"",falaVisivel:!1,timeoutMensagem:null}},methods:{async carregarDados(){try{const e=await v.A.get("/api/assistant/message");this.fala=e.data.message,this.mostrarMensagem()}catch(e){console.error("Erro ao carregar fala do assistente:",e),this.fala="Erro ao buscar dados, tente novamente mais tarde.",this.mostrarMensagem()}},mostrarMensagem(){this.falaVisivel=!0,this.timeoutMensagem&&clearTimeout(this.timeoutMensagem),this.timeoutMensagem=setTimeout(()=>{this.falaVisivel=!1},1e4)},fecharMensagem(){this.falaVisivel=!1,this.timeoutMensagem&&clearTimeout(this.timeoutMensagem)}},mounted(){this.carregarDados()},beforeUnmount(){this.timeoutMensagem&&clearTimeout(this.timeoutMensagem)}},y=a(1241);const w=(0,y.A)(L,[["render",g],["__scopeId","data-v-6af693d0"]]);var C=w,T={components:{RoboAssistant:C},data(){return{mobileMenuOpen:!1}},computed:{...(0,p.aH)(["tasks"]),...(0,p.L8)(["isAuthenticated","isLoading","user"]),isAdmin(){return this.user&&"admin"===this.user.role},tasksFromStore(){return this.tasks}},methods:{...(0,p.i0)(["checkAuth","logout","fetchTasks"]),async handleLogout(){await this.logout(),this.$router.push("/login"),this.mobileMenuOpen=!1},closeMobileMenu(){this.mobileMenuOpen=!1}},async created(){await this.checkAuth(),this.isAuthenticated&&await this.fetchTasks()}};const x=(0,y.A)(T,[["render",h],["__scopeId","data-v-6fa1f303"]]);var D=x,_=a(8512);function S(e,t,a,s,n,l){const r=(0,o.g2)("TaskList");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(r,{tasks:e.tasks},null,8,["tasks"])])}const E={class:"w-100 d-flex flex-column overflow-hidden p-4 bg-light"},M={class:"container-button gap-3 bg-white rounded shadow-sm px-3 py-4 mb-4"},A={class:"d-flex align-items-center gap-2 flex-grow-1 search-box order-1"},F={class:"d-none d-lg-block order-2"},X={class:"d-block d-lg-none w-100 order-3 mt-2"},$={class:"dropdown w-100"},O={class:"btn-dropdown bg-white w-100 text-start d-flex justify-content-between align-items-center",type:"button","data-bs-toggle":"dropdown"},I={class:"dropdown-menu w-100 rounded shadow-sm"},V={class:"d-flex align-items-center gap-2 order-4 mt-2 mt-lg-0 w-100"},N={class:"task-container"},W={class:"notes-wrapper"};function U(e,t,a,l,r,i){const c=(0,o.g2)("TaskFilterButtons"),d=(0,o.g2)("TaskCreate"),u=(0,o.g2)("TaskDetails"),m=(0,o.g2)("Message"),k=(0,o.g2)("TaskCard"),h=(0,o.g2)("NoTasksMessage"),p=(0,o.g2)("NotesPad"),b=(0,o.g2)("TaskEdit"),f=(0,o.g2)("BaseModal");return(0,o.uX)(),(0,o.CE)("div",E,[t[17]||(t[17]=(0,o.Lk)("div",{class:"title-base"},[(0,o.Lk)("h4",{class:"sub-text bg-light fw-medium"},"A rotina ideal comeÃ§a com um plano"),(0,o.Lk)("h1",{class:"mb-3"},"Planejamento de Tarefas")],-1)),(0,o.Lk)("div",M,[(0,o.Lk)("div",A,[t[13]||(t[13]=(0,o.Lk)("i",{class:"fas fa-search text-muted"},null,-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchTerm=e),type:"text",class:"form-control form-control-sm",placeholder:"Buscar tarefa..."},null,512),[[s.Jo,r.searchTerm]])]),(0,o.Lk)("div",F,[(0,o.bF)(c,{activeFilter:r.activeFilter,"onUpdate:filter":i.setFilter},null,8,["activeFilter","onUpdate:filter"])]),(0,o.Lk)("div",X,[(0,o.Lk)("div",$,[(0,o.Lk)("button",O,[(0,o.Lk)("span",null,[t[14]||(t[14]=(0,o.Lk)("i",{class:"fas fa-filter text-muted me-2"},null,-1)),(0,o.eW)(" "+(0,n.v_)(i.filterTitle),1)]),t[15]||(t[15]=(0,o.Lk)("i",{class:"fas fa-chevron-down text-muted"},null,-1))]),(0,o.Lk)("ul",I,[(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"dropdown-item",onClick:t[1]||(t[1]=e=>i.setFilter("all"))},"Todas as Tarefas")]),(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"dropdown-item",onClick:t[2]||(t[2]=e=>i.setFilter("today"))},"Tarefas de Hoje")]),(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"dropdown-item",onClick:t[3]||(t[3]=e=>i.setFilter("week"))},"Tarefas da Semana")]),(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"dropdown-item",onClick:t[4]||(t[4]=e=>i.setFilter("month"))},"Tarefas do MÃªs")]),(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"dropdown-item",onClick:t[5]||(t[5]=e=>i.setFilter("completed"))},"Tarefas ConcluÃ­das")]),(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"dropdown-item",onClick:t[6]||(t[6]=e=>i.setFilter("pending"))},"Tarefas Pendentes")])])])]),(0,o.Lk)("div",V,[(0,o.Lk)("button",{class:"custom-btn",onClick:t[7]||(t[7]=(...e)=>i.openCreateModal&&i.openCreateModal(...e))},[...t[16]||(t[16]=[(0,o.Lk)("i",{class:"fas fa-plus"},null,-1),(0,o.eW)(" Criar Tarefa ",-1)])])])]),r.showCreateModal?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:r.showCreateModal,"new-task":r.newTask,onSubmit:i.createTask,isSubmitting:r.isSubmitting,onVoiceInput:i.handleVoiceInput,onClose:i.closeCreateModal},null,8,["modelValue","new-task","onSubmit","isSubmitting","onVoiceInput","onClose"])):(0,o.Q3)("",!0),r.selectedTask?((0,o.uX)(),(0,o.Wv)(u,{key:1,task:r.selectedTask,onClose:t[8]||(t[8]=e=>r.selectedTask=null),onEdit:i.onEditTask,onDelete:i.onDeleteTask},null,8,["task","onEdit","onDelete"])):(0,o.Q3)("",!0),(0,o.bF)(m,{message:r.message,"onUpdate:message":t[9]||(t[9]=e=>r.message=e)},null,8,["message"]),(0,o.Lk)("div",N,[(0,o.Lk)("div",{class:"task-scroll-wrapper hide-scrollbar",ref:"taskListContainer",onScroll:t[10]||(t[10]=(...t)=>e.handleScroll&&e.handleScroll(...t))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.searchedTasks,e=>((0,o.uX)(),(0,o.Wv)(k,{key:e.id,task:e,onClick:i.showTaskDetails,onEdit:i.onEditTask,onDelete:i.onDeleteTask,onToggleComplete:i.toggleComplete,onToggleSubtask:i.toggleSubtask},null,8,["task","onClick","onEdit","onDelete","onToggleComplete","onToggleSubtask"]))),128)),0===i.searchedTasks.length?((0,o.uX)(),(0,o.Wv)(h,{key:0,filter:r.activeFilter,search:r.searchTerm,onCreateTask:i.openCreateModal},null,8,["filter","search","onCreateTask"])):(0,o.Q3)("",!0)],544),(0,o.Lk)("div",W,[(0,o.bF)(p)])]),r.showEditModal?((0,o.uX)(),(0,o.Wv)(f,{key:2,onClose:t[12]||(t[12]=e=>r.showEditModal=!1)},{default:(0,o.k6)(()=>[(0,o.bF)(b,{modelValue:r.editingTask,onSubmit:i.updateTask,onClose:t[11]||(t[11]=e=>r.showEditModal=!1)},null,8,["modelValue","onSubmit"])]),_:1})):(0,o.Q3)("",!0)])}a(8111),a(2489);const j={class:"modal-content"},P={class:"modal-header d-flex justify-content-between align-items-center w-100"},B={class:"modal-title mb-0 ps-3"},R={class:"modal-content-wrapper"},z={key:0,class:"modal-footer"};function K(e,t,a,l,r,i){return(0,o.uX)(),(0,o.CE)("div",{class:"modal-overlay",onClick:t[3]||(t[3]=(0,s.D$)(t=>e.$emit("close"),["self"]))},[(0,o.Lk)("div",{class:"modal-dialog-custom",onClick:t[2]||(t[2]=(0,s.D$)(()=>{},["stop"]))},[(0,o.Lk)("div",j,[(0,o.Lk)("div",P,[(0,o.RG)(e.$slots,"header",{},()=>[(0,o.Lk)("h5",B,(0,n.v_)(a.title),1)],!0),(0,o.Lk)("button",{type:"button",class:"btn-close-custom","aria-label":"Fechar",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[...t[4]||(t[4]=[(0,o.Lk)("i",{class:"fa-solid fa-xmark",style:{color:"#000000"}},null,-1)])])]),(0,o.Lk)("div",R,[(0,o.Lk)("div",{class:"modal-content-inner",onClick:t[1]||(t[1]=(0,s.D$)(()=>{},["stop"]))},[(0,o.RG)(e.$slots,"default",{},void 0,!0)])]),e.$slots.footer?((0,o.uX)(),(0,o.CE)("div",z,[(0,o.RG)(e.$slots,"footer",{},void 0,!0)])):(0,o.Q3)("",!0)])])])}var J={name:"BaseModal",props:{title:String}};const q=(0,y.A)(J,[["render",K],["__scopeId","data-v-985e7fd8"]]);var H=q;const Q={class:"d-flex justify-content-between align-items-center w-100"},Y={class:"modal-title ps-3 mb-0"},G={class:"d-flex align-items-center gap-2"},Z={class:"dropdown"},ee={class:"dropdown-menu dropdown-menu-end"},te={key:0,class:"mt-3"},ae={class:"list-unstyled mt-2 ms-3"},se=["checked"];function oe(e,t,a,l,r,i){const c=(0,o.g2)("BaseModal");return(0,o.uX)(),(0,o.Wv)(c,{title:a.task.title,onClose:i.emitClose},{header:(0,o.k6)(()=>[(0,o.Lk)("div",Q,[(0,o.Lk)("h5",Y,(0,n.v_)(a.task.title),1),(0,o.Lk)("div",G,[(0,o.Lk)("div",Z,[t[4]||(t[4]=(0,o.Lk)("button",{class:"btn btn-secondary bg-transparent btn-sm border border-0",type:"button","data-bs-toggle":"dropdown"},[(0,o.Lk)("i",{class:"fas fa-ellipsis-v",style:{color:"#000000"}})],-1)),(0,o.Lk)("ul",ee,[(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"dropdown-item text-danger",onClick:t[0]||(t[0]=t=>e.$emit("delete",a.task))},"Excluir")]),(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"dropdown-item",onClick:t[1]||(t[1]=t=>e.$emit("edit",a.task))},"Editar")])])])])])]),default:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"modal-content-wrapper",onClick:t[3]||(t[3]=(0,s.D$)((...e)=>i.emitClose&&i.emitClose(...e),["self"]))},[(0,o.Lk)("div",{class:"modal-content-inner",onClick:t[2]||(t[2]=(0,s.D$)(()=>{},["stop"]))},[(0,o.Lk)("p",null,[t[5]||(t[5]=(0,o.Lk)("strong",null,"DescriÃ§Ã£o:",-1)),(0,o.eW)(" "+(0,n.v_)(a.task.description||"Sem descriÃ§Ã£o"),1)]),(0,o.Lk)("p",null,[t[6]||(t[6]=(0,o.Lk)("strong",null,"Data de criaÃ§Ã£o:",-1)),(0,o.eW)(" "+(0,n.v_)(i.formatDate(a.task.created_at)),1)]),(0,o.Lk)("p",null,[t[7]||(t[7]=(0,o.Lk)("strong",null,"Prazo:",-1)),(0,o.eW)(" "+(0,n.v_)(i.formatDate(a.task.due_date)),1)]),(0,o.Lk)("p",null,[t[8]||(t[8]=(0,o.Lk)("strong",null,"Status:",-1)),(0,o.eW)(" "+(0,n.v_)(a.task.completed?"ConcluÃ­do":"Pendente"),1)]),a.task.subtasks?.length?((0,o.uX)(),(0,o.CE)("div",te,[(0,o.Lk)("strong",null,"Subtarefas ("+(0,n.v_)(a.task.subtasks.length)+"):",1),(0,o.Lk)("ul",ae,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.task.subtasks,e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id,class:"d-flex align-items-center gap-2 mb-1"},[(0,o.Lk)("input",{type:"checkbox",checked:e.completed,disabled:""},null,8,se),(0,o.Lk)("span",{class:(0,n.C4)({"text-decoration-line-through":e.completed})},(0,n.v_)(e.title),3)]))),128))])])):(0,o.Q3)("",!0)])])]),_:1},8,["title","onClose"])}var ne={name:"TaskDetails",components:{BaseModal:H},props:{task:{type:Object,required:!0}},emits:["close","edit","delete"],methods:{emitClose(){this.$emit("close")},formatDate(e){if(!e)return"Sem data";const t=e.split("/");if(3===t.length){const[e,a,s]=t,o=new Date(`${s}-${a}-${e}T00:00:00`);if(isNaN(o.getTime()))return"Data invÃ¡lida";const n=String(o.getDate()).padStart(2,"0"),l=String(o.getMonth()+1).padStart(2,"0"),r=o.getFullYear();return`${n}/${l}/${r}`}const a=new Date(e);if(isNaN(a.getTime()))return"Data invÃ¡lida";const s=String(a.getDate()).padStart(2,"0"),o=String(a.getMonth()+1).padStart(2,"0"),n=a.getFullYear();return`${s}/${o}/${n}`}}};const le=(0,y.A)(ne,[["render",oe],["__scopeId","data-v-60b5e974"]]);var re=le;const ie={class:"container-notes bg-white rounded shadow-sm p-4"},ce={class:"input-group w-100"},de={key:0,class:"notes-list hide-scrollbar"},ue={key:0,class:"text-start flex-grow-1 me-2"},me=["innerHTML"],ke={key:1,class:"flex-grow-1 me-2"},he=["onUpdate:modelValue","onKeyup"],pe={class:"btn-group"},be=["onClick"],fe=["onClick"],ge=["onClick"],ve={key:1,class:"text-muted text-center"};function Le(e,t,a,n,l,r){return(0,o.uX)(),(0,o.CE)("div",ie,[t[4]||(t[4]=(0,o.Lk)("h5",{class:"mb-3"},"Caderno de AnotaÃ§Ãµes",-1)),(0,o.Lk)("div",ce,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.newNote=e),class:"form-control",placeholder:"Escreva sua anotaÃ§Ã£o...",rows:"0"},null,512),[[s.Jo,l.newNote]]),(0,o.Lk)("button",{class:"custom-btn",onClick:t[1]||(t[1]=(...e)=>r.addNote&&r.addNote(...e))},"Adicionar")]),l.notes.length?((0,o.uX)(),(0,o.CE)("div",de,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.notes,(e,a)=>((0,o.uX)(),(0,o.CE)("div",{key:a,class:"list-group-item d-flex justify-content-between align-items-start mb-2"},[e.editing?((0,o.uX)(),(0,o.CE)("div",ke,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t=>e.text=t,class:"form-control",rows:"3",onKeyup:(0,s.jR)(t=>r.saveEdit(e),["enter"])},null,40,he),[[s.Jo,e.text]])])):((0,o.uX)(),(0,o.CE)("div",ue,[(0,o.Lk)("span",{innerHTML:e.text.replace(/\n/g,"<br>")},null,8,me)])),(0,o.Lk)("div",pe,[e.editing?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn border-0",onClick:t=>r.saveEdit(e)}," Salvar ",8,fe)):((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn border-0",onClick:t=>e.editing=!0},[...t[2]||(t[2]=[(0,o.Lk)("i",{class:"fa-solid fa-pen-to-square",style:{color:"#000000"}},null,-1)])],8,be)),(0,o.Lk)("button",{class:"btn border-0",onClick:e=>r.deleteNote(a)},[...t[3]||(t[3]=[(0,o.Lk)("i",{class:"fa-solid fa-trash",style:{color:"#000000"}},null,-1)])],8,ge)])]))),128))])):((0,o.uX)(),(0,o.CE)("p",ve,"Nenhuma anotaÃ§Ã£o ainda..."))])}var ye={name:"NotesPad",data(){return{newNote:"",notes:JSON.parse(localStorage.getItem("notes")||"[]")}},methods:{addNote(){this.newNote.trim()&&(this.notes.push({text:this.newNote.trim(),editing:!1}),this.newNote="",this.saveNotes())},saveEdit(e){e.editing=!1,this.saveNotes()},deleteNote(e){this.notes.splice(e,1),this.saveNotes()},saveNotes(){localStorage.setItem("notes",JSON.stringify(this.notes))}}};const we=(0,y.A)(ye,[["render",Le],["__scopeId","data-v-08568ff6"]]);var Ce=we;const Te={class:"d-flex flex-column gap-3"},xe=["onUpdate:modelValue"],De=["onClick"],_e={class:"input-group input-group-sm"},Se={class:"group-btn d-flex justify-content-end gap-2 mt-3"},Ee=["disabled"],Me={key:1,class:"text-center"},Ae={class:"group-btn d-flex gap-3"};function Fe(e,t,a,n,l,r){const i=(0,o.g2)("Loader"),c=(0,o.g2)("VoiceAssistant"),d=(0,o.g2)("BaseModal");return(0,o.uX)(),(0,o.Wv)(d,{title:"form"===l.mode?"Criar Tarefa":"Criar por Voz",onClose:r.emitClose},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Te,["form"===l.mode?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.form.title=e),placeholder:"TÃ­tulo",class:"form-control"},null,512),[[s.Jo,r.form.title]]),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.form.description=e),placeholder:"DescriÃ§Ã£o",class:"form-control"},null,512),[[s.Jo,r.form.description]]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.form.subtasks,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"input-group input-group-sm"},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t=>e.title=t,placeholder:"Subtarefa",class:"form-control"},null,8,xe),[[s.Jo,e.title]]),(0,o.Lk)("button",{class:"btn btn-danger btn-sm",onClick:e=>r.removeSubtask(t)},"Remover",8,De)]))),128)),(0,o.Lk)("div",_e,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.emptySubtaskTitle=e),placeholder:"Adicionar Subtarefa",class:"form-control"},null,512),[[s.Jo,l.emptySubtaskTitle]]),(0,o.Lk)("button",{class:"btn-bottomless",onClick:t[3]||(t[3]=(...e)=>r.addSubtask&&r.addSubtask(...e))},"Adicionar")]),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>r.form.due_date=e),class:"form-control"},null,512),[[s.Jo,r.form.due_date]]),(0,o.bF)(i,{loading:l.loadingVoice},null,8,["loading"]),(0,o.Lk)("div",Se,[(0,o.Lk)("button",{class:"btn-bottomless",onClick:t[5]||(t[5]=(...e)=>r.switchToVoice&&r.switchToVoice(...e))}," ðŸŽ¤ Criar por voz "),(0,o.Lk)("button",{class:"custom-btn",onClick:t[6]||(t[6]=(...e)=>r.emitSubmit&&r.emitSubmit(...e)),disabled:a.isSubmitting||l.loadingVoice}," Criar ",8,Ee),(0,o.Lk)("button",{class:"btn-bottomless",onClick:t[7]||(t[7]=(...e)=>r.emitClose&&r.emitClose(...e))}," Cancelar ")])],64)):((0,o.uX)(),(0,o.CE)("div",Me,[t[9]||(t[9]=(0,o.Lk)("h5",{class:"fw-bold mb-3"},"Como criar por voz",-1)),t[10]||(t[10]=(0,o.Lk)("p",{class:"text-muted small mb-4"},[(0,o.eW)(" Fale algo como:"),(0,o.Lk)("br"),(0,o.Lk)("em",null,'"Ir ao mercado, amanhÃ£ Ã s 18h, subtarefas arroz, tomate, carne..."'),(0,o.Lk)("br"),(0,o.Lk)("br"),(0,o.eW)(" Eu vou preencher automaticamente o tÃ­tulo, descriÃ§Ã£o, subtarefa e data pra vocÃª. ")],-1)),(0,o.Lk)("div",Ae,[(0,o.bF)(c,{onVoiceInput:r.handleVoiceInput,onListeningStatus:r.handleListening,onCreatingTask:r.handleCreatingTask},null,8,["onVoiceInput","onListeningStatus","onCreatingTask"]),(0,o.Lk)("button",{class:"btn-bottomless",onClick:t[8]||(t[8]=(...e)=>r.switchToForm&&r.switchToForm(...e))}," Voltar ao formulÃ¡rio ")])]))])]),_:1},8,["title","onClose"])}a(1701);var Xe=a(144);const $e=["disabled"];var Oe={__name:"VoiceAssistant",emits:["voice-input","listening-status","creating-task"],setup(e,{emit:t}){const a=t,s=(0,Xe.KR)(!1),l=window.SpeechRecognition||window.webkitSpeechRecognition;let r;function i(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}async function c(){if(r)try{await navigator.mediaDevices.getUserMedia({audio:!0}),r.start(),s.value=!0,a("listening-status",!0)}catch(e){alert("PermissÃ£o para o microfone negada ou indisponÃ­vel."),a("listening-status",!1)}else alert("Seu navegador nÃ£o suporta reconhecimento de voz.")}return l&&(r=new l,r.lang="pt-BR",r.interimResults=!1,r.maxAlternatives=1,r.continuous=!1,r.onresult=async e=>{const t=e.results[0][0].transcript.trim();s.value=!1,a("listening-status",!1),a("creating-task",!0);try{const e=await v.A.post("https://my-taskly-production.up.railway.app/api/voice-task",{text:t},{withCredentials:!0}),s=e.data;a("voice-input",{title:i(s.title||""),description:s.description||"",due_date:s.due_date||"",subtasks:(s.subtasks||[]).map(e=>({id:Date.now()+Math.random(),title:i(e),completed:!1}))})}catch(o){alert("âŒ NÃ£o foi possÃ­vel interpretar a tarefa. Tente novamente.")}finally{a("creating-task",!1)}},r.onerror=()=>{s.value=!1,a("listening-status",!1)},r.onend=()=>{s.value=!1,a("listening-status",!1)}),(e,t)=>((0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("button",{class:"custom-btn",onClick:c,disabled:s.value},[t[0]||(t[0]=(0,o.Lk)("i",{class:"fa-solid fa-microphone pe-2",style:{color:"#fff"}},null,-1)),(0,o.eW)(" "+(0,n.v_)(s.value?"Ouvindo...":"Falar agora"),1)],8,$e)]))}};const Ie=(0,y.A)(Oe,[["__scopeId","data-v-c0967dde"]]);var Ve=Ie;const Ne={key:0,class:"loader-overlay"};function We(e,t,a,s,n,l){return a.loading?((0,o.uX)(),(0,o.CE)("div",Ne,[...t[0]||(t[0]=[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"},"Carregando...")],-1)])])):(0,o.Q3)("",!0)}var Ue={props:{loading:{type:Boolean,required:!0}}};const je=(0,y.A)(Ue,[["render",We],["__scopeId","data-v-7a51ec4d"]]);var Pe=je,Be={name:"TaskCreate",components:{BaseModal:H,VoiceAssistant:Ve,Loader:Pe},props:{modelValue:{type:Boolean,required:!0},newTask:{type:Object,required:!0},isSubmitting:{type:Boolean,default:!1}},emits:["close","submit","voice-input","update:new-task","listening-status"],data(){return{mode:"form",emptySubtaskTitle:"",loadingVoice:!1,initialTask:{title:"",description:"",due_date:"",subtasks:[]}}},computed:{form:{get(){return this.newTask.subtasks||(this.newTask.subtasks=[]),this.newTask},set(e){this.$emit("update:new-task",e)}}},watch:{modelValue(e){e||this.resetForm()}},methods:{switchToVoice(){this.mode="voice"},switchToForm(){this.mode="form"},emitClose(){this.resetForm(),this.mode="form",this.$emit("close")},emitSubmit(){""!==this.emptySubtaskTitle.trim()&&(this.form.subtasks.push({title:this.emptySubtaskTitle,completed:!1}),this.emptySubtaskTitle=""),this.$emit("submit",{...this.form}),this.resetForm()},addSubtask(){""!==this.emptySubtaskTitle.trim()&&(this.form.subtasks.push({title:this.emptySubtaskTitle,completed:!1}),this.emptySubtaskTitle="")},removeSubtask(e){this.form.subtasks.splice(e,1)},handleVoiceInput(e){this.form.title=e.title||"",this.form.description=e.description||"",this.form.due_date=e.due_date||"",this.form.subtasks=e.subtasks||[],this.emptySubtaskTitle="",this.loadingVoice=!1,this.mode="form"},handleListening(e){this.$emit("listening-status",e)},handleCreatingTask(e){this.loadingVoice=e},resetForm(){this.$emit("update:new-task",{...this.initialTask}),this.emptySubtaskTitle="",this.loadingVoice=!1,this.mode="form"}}};const Re=(0,y.A)(Be,[["render",Fe],["__scopeId","data-v-8f0a432c"]]);var ze=Re;const Ke={class:"mb-3"},Je={class:"mb-3"},qe={class:"mb-3 d-flex flex-column"},He=["onUpdate:modelValue"],Qe=["onClick"],Ye={class:"mb-3"},Ge={class:"d-flex justify-content-end gap-2 mt-4"};function Ze(e,t,a,n,l,r){const i=(0,o.g2)("BaseModal");return(0,o.uX)(),(0,o.Wv)(i,{title:"Editar Tarefa",onClose:t[6]||(t[6]=t=>e.$emit("close"))},{default:(0,o.k6)(()=>[(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)((...e)=>r.submitEdit&&r.submitEdit(...e),["prevent"]))},[(0,o.Lk)("div",Ke,[t[7]||(t[7]=(0,o.Lk)("label",{class:"form-label"},"TÃ­tulo",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.localTask.title=e),type:"text",class:"form-control"},null,512),[[s.Jo,l.localTask.title]])]),(0,o.Lk)("div",Je,[t[8]||(t[8]=(0,o.Lk)("label",{class:"form-label"},"DescriÃ§Ã£o",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.localTask.description=e),class:"form-control"},null,512),[[s.Jo,l.localTask.description]])]),(0,o.Lk)("div",qe,[t[10]||(t[10]=(0,o.Lk)("label",{class:"form-label"},"Subtarefas",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.localTask.subtasks,(e,a)=>((0,o.uX)(),(0,o.CE)("div",{key:a,class:"d-flex align-items-center gap-2 mb-2"},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t=>e.title=t,type:"text",class:"form-control flex-grow-1",placeholder:"TÃ­tulo da subtarefa"},null,8,He),[[s.Jo,e.title]]),(0,o.Lk)("button",{onClick:(0,s.D$)(e=>r.removeSubtask(a),["prevent"]),type:"button",class:"btn btn-sm"},[...t[9]||(t[9]=[(0,o.Lk)("i",{class:"fa-solid fa-trash",style:{color:"#000000"}},null,-1)])],8,Qe)]))),128)),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(0,s.D$)((...e)=>r.addSubtask&&r.addSubtask(...e),["prevent"])),type:"button",class:"btn-bottomless",style:{width:"12rem"}}," Adicionar Subtarefa ")]),(0,o.Lk)("div",Ye,[t[11]||(t[11]=(0,o.Lk)("label",{class:"form-label"},"Prazo",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.localTask.due_date=e),type:"date",class:"form-control"},null,512),[[s.Jo,l.localTask.due_date]])]),(0,o.Lk)("div",Ge,[(0,o.Lk)("button",{type:"button",onClick:t[4]||(t[4]=t=>e.$emit("close")),class:"btn-bottomless"}," Cancelar "),t[12]||(t[12]=(0,o.Lk)("button",{type:"submit",class:"custom-btn"},"Salvar",-1))])],32)]),_:1})}var et={name:"TaskEdit",components:{BaseModal:H},props:{modelValue:Object},data(){return{localTask:JSON.parse(JSON.stringify(this.modelValue||{}))}},watch:{modelValue(e){this.localTask=JSON.parse(JSON.stringify(e||{}))}},methods:{submitEdit(){this.$emit("submit",this.localTask)},addSubtask(){this.localTask.subtasks||(this.localTask.subtasks=[]),this.localTask.subtasks.push({title:"",completed:!1})},removeSubtask(e){this.localTask.subtasks.splice(e,1)}}};const tt=(0,y.A)(et,[["render",Ze],["__scopeId","data-v-502d700d"]]);var at=tt;function st(e,t,a,s,l,r){const i=(0,o.g2)("BaseModal");return l.visible?((0,o.uX)(),(0,o.Wv)(i,{key:0,onClose:r.close,title:"Mensagem"},{default:(0,o.k6)(()=>[(0,o.Lk)("p",null,(0,n.v_)(a.message),1)]),_:1},8,["onClose"])):(0,o.Q3)("",!0)}var ot={name:"Message",components:{BaseModal:H},props:{message:String},data(){return{visible:!1,timer:null}},watch:{message(e){this.visible=!!e}},methods:{close(){this.visible=!1,this.$emit("update:message","")}},beforeUnmount(){this.timer&&clearTimeout(this.timer)}};const nt=(0,y.A)(ot,[["render",st]]);var lt=nt;const rt={class:"d-flex gap-2 ms-3 flex-wrap"},it=["onClick"];function ct(e,t,a,s,l,r){return(0,o.uX)(),(0,o.CE)("div",rt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.filterOptions,t=>((0,o.uX)(),(0,o.CE)("button",{key:t.value,class:(0,n.C4)(["custom-btn",{active:a.activeFilter===t.value}]),onClick:a=>e.$emit("update:filter",t.value)},(0,n.v_)(t.label),11,it))),128))])}var dt={name:"TaskFilteredButtons",props:{activeFilter:{type:String,required:!0}},data(){return{filterOptions:[{label:"Hoje",value:"today"},{label:"Todas",value:"all"},{label:"ConcluÃ­das",value:"completed"},{label:"Pendentes",value:"pending"},{label:"Semana",value:"week"},{label:"MÃªs",value:"month"}]}},computed:{filterTitle(){switch(this.activeFilter){case"all":return"Todas as Tarefas";case"completed":return"Tarefas ConcluÃ­das";case"pending":return"Tarefas Pendentes";case"today":return"Tarefas de Hoje";case"week":return"Tarefas da Semana";case"month":return"Tarefas do MÃªs";default:return"Tarefas"}}},methods:{filterBtnClass(e){const t="px-3 py-1 rounded font-semibold text-sm transition",a="bg-[#01675e1a] text-[#01675e] border border-[#01675e]",s="bg-white text-gray-700 hover:bg-gray-100 border border-gray-300";return`${t} ${this.activeFilter===e?a:s}`}}};const ut=(0,y.A)(dt,[["render",ct],["__scopeId","data-v-54e6ea6e"]]);var mt=ut;const kt={class:"task-title fs-6 d-flex align-items-center justify-content-between mb-2"},ht={class:"d-flex gap-2 align-items-center"},pt={key:0,class:"task-actions d-flex gap-2"},bt={key:0,class:"text-muted mb-2"},ft={class:"d-flex align-items-center justify-content-between mt-2"},gt={key:0,class:"d-flex align-items-center gap-2"},vt={class:"progress-circle"},Lt={viewBox:"0 0 36 36",class:"circular-chart"},yt=["stroke-dasharray"],wt={x:"18",y:"21.35",class:"percentage"},Ct={key:1,class:"list-unstyled mt-2 ms-4"},Tt=["onClick"];function xt(e,t,a,l,r,i){return(0,o.uX)(),(0,o.CE)("div",{class:"task-card p-3 bg-white rounded shadow-sm",onClick:t[4]||(t[4]=(...e)=>i.handleClick&&i.handleClick(...e)),style:{cursor:"pointer",width:"100%",position:"relative"}},[(0,o.Lk)("div",kt,[(0,o.Lk)("div",ht,[a.readonly?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",{key:0,onClick:t[0]||(t[0]=(0,s.D$)((...e)=>i.toggleComplete&&i.toggleComplete(...e),["stop"])),style:{cursor:"pointer"}},[(0,o.Lk)("i",{class:(0,n.C4)(a.task.completed?"fa-regular fa-circle-check":"fa-regular fa-circle"),style:{color:"#000000","font-size":"1.2rem"}},null,2)])),(0,o.Lk)("strong",null,(0,n.v_)(a.task.title),1)]),a.readonly?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",pt,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(0,s.D$)(t=>e.$emit("edit",a.task),["stop"]))},[...t[5]||(t[5]=[(0,o.Lk)("i",{class:"fa-solid fa-pen-to-square",style:{color:"#000000"}},null,-1)])]),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(0,s.D$)(t=>e.$emit("delete",a.task),["stop"]))},[...t[6]||(t[6]=[(0,o.Lk)("i",{class:"fa-solid fa-trash",style:{color:"#000000"}},null,-1)])])]))]),a.task.description?((0,o.uX)(),(0,o.CE)("p",bt,(0,n.v_)(a.task.description),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",ft,[(0,o.Lk)("span",{class:(0,n.C4)([i.getTaskClass(a.task),"d-flex align-items-center gap-1"])},[t[7]||(t[7]=(0,o.Lk)("i",{class:"fa-solid fa-calendar-days"},null,-1)),(0,o.eW)(" "+(0,n.v_)(a.task.due_date),1)],2),a.task.subtasks?.length?((0,o.uX)(),(0,o.CE)("div",gt,[(0,o.Lk)("div",vt,[((0,o.uX)(),(0,o.CE)("svg",Lt,[t[8]||(t[8]=(0,o.Lk)("path",{class:"circle-bg",d:"M18 2.0845\r\n                 a 15.9155 15.9155 0 0 1 0 31.831\r\n                 a 15.9155 15.9155 0 0 1 0 -31.831"},null,-1)),(0,o.Lk)("path",{class:"circle","stroke-dasharray":i.percentSubtasks+", 100",d:"M18 2.0845\r\n                 a 15.9155 15.9155 0 0 1 0 31.831\r\n                 a 15.9155 15.9155 0 0 1 0 -31.831"},null,8,yt),(0,o.Lk)("text",wt,(0,n.v_)(i.percentSubtasks)+"% ",1)]))]),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(0,s.D$)((...e)=>i.toggleSubtasks&&i.toggleSubtasks(...e),["stop"])),class:"btn btn-link btn-sm p-0 ms-1","aria-label":"Expandir subtarefas"},[(0,o.Lk)("i",{id:"showsubtasks",class:(0,n.C4)(r.showSubtasks?"fa-solid fa-chevron-down":"fa-solid fa-chevron-up")},null,2)])])):(0,o.Q3)("",!0)]),r.showSubtasks&&a.task.subtasks?.length?((0,o.uX)(),(0,o.CE)("ul",Ct,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.task.subtasks,t=>((0,o.uX)(),(0,o.CE)("li",{key:t.id,class:"d-flex align-items-center gap-2"},[a.readonly?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",{key:0,onClick:(0,s.D$)(a=>e.$emit("toggle-subtask",t),["stop"]),style:{cursor:"pointer"}},[(0,o.Lk)("i",{class:(0,n.C4)(t.completed?"fa-regular fa-circle-check":"fa-regular fa-circle"),style:{color:"#000000"}},null,2)],8,Tt)),(0,o.Lk)("span",{class:(0,n.C4)({"text-decoration-line-through":t.completed})},(0,n.v_)(t.title),3)]))),128))])):(0,o.Q3)("",!0)])}var Dt={name:"TaskCard",props:{task:{type:Object,required:!0},readonly:{type:Boolean,default:!1}},emits:["edit","delete","click","toggle-complete","toggle-subtask"],data(){return{showSubtasks:!1}},computed:{percentSubtasks(){if(!this.task.subtasks||0===this.task.subtasks.length)return 0;const e=this.task.subtasks.filter(e=>e.completed).length;return Math.round(e/this.task.subtasks.length*100)}},methods:{handleClick(){this.$emit("click",this.task)},toggleComplete(){this.$emit("toggle-complete",this.task)},toggleSubtasks(){this.showSubtasks=!this.showSubtasks},getTaskClass(e){if(!e||!e.due_date)return"";const t=e.due_date.split("/");if(3!==t.length)return"";const[a,s,o]=t.map(Number),n=new Date(o,s-1,a);if(isNaN(n))return"";const l=new Date;return l.setHours(0,0,0,0),n.setHours(0,0,0,0),e.completed?"text-success":n<l?"text-danger":"text-warning"}}};const _t=(0,y.A)(Dt,[["render",xt],["__scopeId","data-v-17cd4bc6"]]);var St=_t;const Et={class:"text-center text-muted py-5"},Mt=["src"],At={class:"mb-2"};function Ft(e,t,a,s,l,r){return(0,o.uX)(),(0,o.CE)("div",Et,[(0,o.Lk)("img",{src:r.imageSrc,alt:"Nenhuma tarefa",class:"mb-4",style:{"max-width":"200px",opacity:"0.8"}},null,8,Mt),(0,o.Lk)("h5",At,(0,n.v_)(r.message),1)])}var Xt={props:{filter:String,search:String},computed:{message(){if(this.search)return`Nenhuma tarefa encontrada com o nome "${this.search}".`;switch(this.filter){case"today":return"VocÃª nÃ£o tem tarefas para hoje.";case"week":return"VocÃª nÃ£o tem tarefas para esta semana.";case"month":return"VocÃª nÃ£o tem tarefas para este mÃªs.";case"completed":return"VocÃª ainda nÃ£o concluiu nenhuma tarefa.";case"pending":return"VocÃª nÃ£o possui tarefas pendentes.";case"all":return"VocÃª ainda nÃ£o criou nenhuma tarefa.";default:return"Nenhuma tarefa encontrada."}},imageSrc(){return this.search?"/img/alert-pink.svg":"/img/add-task-pink.svg"}}};const $t=(0,y.A)(Xt,[["render",Ft],["__scopeId","data-v-098c1312"]]);var Ot=$t;function It(e,t){const a=new Date;a.setHours(0,0,0,0);const s=e=>{const t=e.split("/");if(3===t.length){const[e,a,s]=t;return new Date(+s,+a-1,+e)}return new Date(e)};return e.filter(e=>{if(!e.due_date)return!1;const o=s(e.due_date);if(isNaN(o))return!1;switch(o.setHours(0,0,0,0),t){case"all":return!0;case"completed":return e.completed;case"pending":return!e.completed&&o<a;case"today":return!e.completed&&o.getTime()===a.getTime();case"week":{const t=new Date(a);t.setDate(a.getDate()-a.getDay());const s=new Date(t);return s.setDate(t.getDate()+6),!e.completed&&o>=t&&o<=s}case"month":return!e.completed&&o.getMonth()===a.getMonth()&&o.getFullYear()===a.getFullYear();default:return!0}})}function Vt(e){if(!e)return null;if(e instanceof Date)return e.toISOString().split("T")[0];const t=e.split("/");return 3===t.length?`${t[2]}-${t[1].padStart(2,"0")}-${t[0].padStart(2,"0")}`:e}var Nt=a(4507),Wt=a.n(Nt),Ut=a(3169),jt=a.n(Ut);const Pt="mysecure_29_08_04_x",Bt=new(Wt())(localStorage,{hash:function(e){return jt().SHA256(e+Pt).toString()},encrypt:function(e){return jt().AES.encrypt(e,Pt).toString()},decrypt:function(e){const t=jt().AES.decrypt(e,Pt);return t.toString(jt().enc.Utf8)}});var Rt=Bt;const zt="https://my-taskly-production.up.railway.app/api",Kt=v.A.create({baseURL:zt,withCredentials:!0});Kt.interceptors.request.use(e=>{const t=Rt.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});var Jt=Kt,qt={components:{BaseModal:H,TaskDetails:re,NotesPad:Ce,TaskCreate:ze,TaskEdit:at,Message:lt,TaskFilterButtons:mt,TaskCard:St,NoTasksMessage:Ot},props:{tasks:Array},data(){return{newTask:this.emptyTask(),editingTask:null,selectedTask:null,showCreateModal:!1,showEditModal:!1,message:"",activeFilter:"all",searchTerm:"",isSubmitting:!1}},computed:{...(0,p.aH)(["tasks"]),filteredTasks(){return It(this.tasks,this.activeFilter)},searchedTasks(){if(!this.searchTerm.trim())return this.filteredTasks;const e=this.searchTerm.toLowerCase();return this.filteredTasks.filter(t=>t.title.toLowerCase().includes(e))},filterTitle(){switch(this.activeFilter){case"all":return"Todas as Tarefas";case"completed":return"Tarefas ConcluÃ­das";case"pending":return"Tarefas Pendentes";case"today":return"Tarefas de Hoje";case"week":return"Tarefas da Semana";case"month":return"Tarefas do MÃªs";default:return"Tarefas"}}},methods:{emptyTask(){return{title:"",description:"",due_date:"",subtasks:[]}},openCreateModal(){this.newTask=this.emptyTask(),this.showCreateModal=!0},closeCreateModal(){this.newTask=this.emptyTask(),this.showCreateModal=!1},setFilter(e){this.activeFilter=e},showTaskDetails(e){this.selectedTask=e},async createTask(e){if(e.title){this.isSubmitting=!0;try{const t=await Jt.post("/tasks",e);this.tasks.push(t.data),this.closeCreateModal(),this.message="Tarefa criada com sucesso!",setTimeout(()=>this.message="",2e3)}catch(t){this.message="Erro ao criar tarefa."}finally{this.isSubmitting=!1}}else this.message="O tÃ­tulo da tarefa Ã© obrigatÃ³rio."},async updateTask(e){if(e.title){e.subtasks&&Array.isArray(e.subtasks)&&(e.subtasks=e.subtasks.filter(e=>e.title&&""!==e.title.trim()));try{const t=await Jt.put(`/tasks/${e.id}`,e),a=this.tasks.findIndex(t=>t.id===e.id);-1!==a&&this.tasks.splice(a,1,t.data),this.showEditModal=!1,this.message="Tarefa atualizada com sucesso!"}catch(t){this.message="Erro ao atualizar tarefa."}finally{setTimeout(()=>this.message="",2e3)}}else this.message="O tÃ­tulo Ã© obrigatÃ³rio."},async toggleSubtask(e){e.completed=!e.completed;try{const t=await Jt.put(`/subtasks/${e.id}`,{title:e.title,completed:e.completed}),a=t.data.subtask,s=t.data.task,o=this.tasks.findIndex(e=>e.id===s.id);if(-1!==o){const e=this.tasks[o],t=e.subtasks.findIndex(e=>e.id===a.id);-1!==t&&(e.subtasks[t]=a),e.completed=s.completed}}catch(t){e.completed=!e.completed,this.message="Erro ao atualizar subtarefa."}},async toggleComplete(e){e.completed=!e.completed;const t=e=>{if(!e)return null;if("string"===typeof e&&e.includes("/")){const[t,a,s]=e.split("/");return`${s}-${a}-${t}`}const t=new Date(e);return t.toISOString().split("T")[0]};try{const a=await Jt.put(`/tasks/${e.id}`,{title:e.title,description:e.description,due_date:t(e.due_date),completed:e.completed}),s=a.data,o=this.tasks.findIndex(t=>t.id===e.id);-1!==o&&this.tasks.splice(o,1,s)}catch(a){e.completed=!e.completed,this.message="Erro ao atualizar tarefa."}},onEditTask(e){this.editingTask={...e,due_date:Vt(e.due_date)},this.showEditModal=!0},async onDeleteTask(e){try{await Jt.delete(`/tasks/${e.id}`);const t=this.tasks.findIndex(t=>t.id===e.id);-1!==t&&this.tasks.splice(t,1),this.selectedTask=null,this.message="Tarefa excluÃ­da com sucesso!"}catch(t){this.message="Erro ao excluir tarefa."}setTimeout(()=>this.message="",2e3)},handleVoiceInput({title:e,due_date:t}){if(e){const t=[" no "," em "," dia "," de "];let a=e.toLowerCase(),s=-1;t.forEach(e=>{const t=a.lastIndexOf(e);t>s&&(s=t)});let o=s>-1?e.substring(0,s):e;o=o.trim(),o=o.charAt(0).toUpperCase()+o.slice(1),this.newTask.title=o}t&&(this.newTask.due_date=t)}}};const Ht=(0,y.A)(qt,[["render",U],["__scopeId","data-v-5e819bab"]]);var Qt=Ht,Yt={name:"HomeView",components:{TaskList:Qt},computed:{...(0,p.aH)(["tasks"])}};const Gt=(0,y.A)(Yt,[["render",S]]);var Zt=Gt;const ea={class:"bg-light my-3 px-4"},ta={class:"container-calendar w-100"},aa={class:"fw-semibold fs-4 my-4 text-center text-md-start mb-2"},sa={class:"title-base d-flex gap-1"},oa={class:"title-calendar m-0"},na={key:0,class:"year-grid"},la={class:"month-name text-center font-weight-bold mb-2"},ra={class:"calendar-grid"},ia=["onClick"],ca={class:"day-wrapper"},da={key:1,class:"month-container bg-white rounded shadow-sm"},ua={class:"month-name text-center font-weight-bold mb-2"},ma={class:"calendar-grid"},ka=["onClick"],ha={class:"day-wrapper"},pa={key:0},ba={key:1,class:"text-center text-muted"};function fa(e,t,a,s,l,r){const i=(0,o.g2)("TaskCard"),c=(0,o.g2)("BaseModal");return(0,o.uX)(),(0,o.CE)("div",ea,[(0,o.Lk)("div",ta,[(0,o.Lk)("div",aa,[(0,o.Lk)("div",sa,[(0,o.Lk)("button",{class:"btn btn-sm border-0 ps-0",onClick:t[0]||(t[0]=(...e)=>r.prevPeriod&&r.prevPeriod(...e))},[...t[3]||(t[3]=[(0,o.Lk)("i",{class:"fas fa-angle-left"},null,-1)])]),(0,o.Lk)("h4",oa,(0,n.v_)(l.isMobile?r.monthName(l.currentMonth)+" - "+l.currentYear:"CalendÃ¡rio - "+l.currentYear),1),(0,o.Lk)("button",{class:"btn btn-sm border-0",onClick:t[1]||(t[1]=(...e)=>r.nextPeriod&&r.nextPeriod(...e))},[...t[4]||(t[4]=[(0,o.Lk)("i",{class:"fas fa-angle-right"},null,-1)])])])]),l.isMobile?((0,o.uX)(),(0,o.CE)("div",da,[(0,o.Lk)("div",ua,(0,n.v_)(r.monthName(l.currentMonth)),1),(0,o.Lk)("div",ma,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.daysOfWeek,e=>((0,o.uX)(),(0,o.CE)("div",{class:"calendar-day header",key:e},(0,n.v_)(e),1))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.getPaddedDays(l.currentYear,l.currentMonth),(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"calendar-day",onClick:t=>r.handleDayClick(e)},[(0,o.Lk)("div",ha,[(0,o.Lk)("div",{class:(0,n.C4)(r.getDayClass(e))},(0,n.v_)(e?.getDate?.()||""),3)])],8,ka))),128))])])):((0,o.uX)(),(0,o.CE)("div",na,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(12,e=>(0,o.Lk)("div",{key:e,class:"month-container rounded shadow-sm"},[(0,o.Lk)("div",la,(0,n.v_)(r.monthName(e-1)),1),(0,o.Lk)("div",ra,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.daysOfWeek,e=>((0,o.uX)(),(0,o.CE)("div",{class:"calendar-day header",key:e},(0,n.v_)(e),1))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.getPaddedDays(l.currentYear,e-1),(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"calendar-day",onClick:t=>r.handleDayClick(e)},[(0,o.Lk)("div",ca,[(0,o.Lk)("div",{class:(0,n.C4)(r.getDayClass(e))},(0,n.v_)(e?.getDate?.()||""),3)])],8,ia))),128))])])),64))])),l.showModal?((0,o.uX)(),(0,o.Wv)(c,{key:2,title:"Tarefas de "+r.selectedDateFormatted,onClose:t[2]||(t[2]=e=>l.showModal=!1)},{default:(0,o.k6)(()=>[r.tasksForSelectedDate.length>0?((0,o.uX)(),(0,o.CE)("div",pa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.tasksForSelectedDate,e=>((0,o.uX)(),(0,o.Wv)(i,{key:e.id,task:e,readonly:!0},null,8,["task"]))),128))])):((0,o.uX)(),(0,o.CE)("div",ba," Nenhuma tarefa para este dia. "))]),_:1},8,["title"])):(0,o.Q3)("",!0)])])}a(3579);var ga={name:"Calendar",components:{BaseModal:H,TaskCard:St},data(){const e=new Date;return{currentYear:e.getFullYear(),currentMonth:e.getMonth(),isMobile:window.innerWidth<768,daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","SÃ¡b"],tasks:[],showModal:!1,selectedDate:null}},computed:{selectedDateFormatted(){return this.selectedDate?this.formatDate(this.selectedDate):""},tasksForSelectedDate(){if(!this.selectedDate)return[];const e=this.formatDate(this.selectedDate);return this.tasks.filter(t=>t.due_date===e)}},methods:{async fetchTasks(){try{const e=await Jt.get("/tasks");this.tasks=e.data}catch(e){console.error("Erro ao buscar tarefas:")}},monthName(e){return new Date(this.currentYear,e).toLocaleString("pt-BR",{month:"long"})},getDaysInMonth(e,t){const a=[],s=new Date(e,t,1);while(s.getMonth()===t)a.push(new Date(s)),s.setDate(s.getDate()+1);return a},getPaddedDays(e,t){const a=this.getDaysInMonth(e,t),s=new Date(e,t,1).getDay(),o=Array(s).fill(null);return[...o,...a]},formatDate(e){const t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return`${t}/${a}/${s}`},getDayClass(e){if(!e)return"empty-day";const t=this.formatDate(e),a=new Date;a.setHours(0,0,0,0);const s=this.tasks?.filter(e=>e.due_date===t)||[];if(0===s.length)return"";const o=s.some(e=>{const[t,s,o]=e.due_date.split("/"),n=new Date(+o,+s-1,+t);return!e.completed&&n<a}),n=s.some(e=>{const[t,s,o]=e.due_date.split("/"),n=new Date(+o,+s-1,+t);return!e.completed&&n>=a});return o?"has-task bg-danger text-white rounded-circle":n?"has-task bg-yellow text-white rounded-circle":"has-task bg-success text-white rounded-circle"},handleDayClick(e){if(!e)return;const t=this.formatDate(e),a=this.tasks.filter(e=>e.due_date===t);a.length>0&&(this.selectedDate=e,this.showModal=!0)},prevPeriod(){this.isMobile?(this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--)):this.currentYear--},nextPeriod(){this.isMobile?(this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++)):this.currentYear++}},mounted(){this.fetchTasks(),window.addEventListener("resize",()=>{this.isMobile=window.innerWidth<768})}};const va=(0,y.A)(ga,[["render",fa],["__scopeId","data-v-03d9437d"]]);var La=va;const ya={class:"dashboard-wrapper container py-4"},wa={class:"row text-center g-3"},Ca={class:"card stat-card bg-white text-black shadow-sm border-light rounded"},Ta={class:"card-body py-3"},xa={class:"card-title fs-6 mb-2"},Da={class:"display-6 mb-0"},_a={class:"mb-4"},Sa={class:"white-card2 shadow-sm rounded"},Ea={class:"chart-item"},Ma={class:"chart-box"},Aa={class:"chart-item"},Fa={class:"chart-box"},Xa={class:"chart-item"},$a={class:"chart-box"},Oa={class:"row white-card shadow-sm rounded"},Ia={class:"col-12"},Va={class:"chart-box"},Na={class:"mb-3 white-card shadow-sm rounded"},Wa={class:"progress",style:{height:"30px"}},Ua=["aria-valuenow"];function ja(e,t,a,s,l,r){const i=(0,o.g2)("DoughnutChart"),c=(0,o.g2)("LineChart");return(0,o.uX)(),(0,o.CE)("div",ya,[t[5]||(t[5]=(0,o.Lk)("h2",{class:"title-base fw-semibold fs-4 mb-2 pb-2"},"Resumo das suas tarefas",-1)),(0,o.Lk)("div",wa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.stats,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-12 col-sm-6 col-md-4 col-lg-3",key:t},[(0,o.Lk)("div",Ca,[(0,o.Lk)("div",Ta,[(0,o.Lk)("h5",xa,(0,n.v_)(e.label),1),(0,o.Lk)("p",Da,(0,n.v_)(e.value),1)])])]))),128))]),t[6]||(t[6]=(0,o.Lk)("h2",{class:"fw-semibold fs-4 my-4 text-start"},"DistribuiÃ§Ã£o e progresso visual",-1)),(0,o.Lk)("div",_a,[(0,o.Lk)("div",Sa,[(0,o.Lk)("div",Ea,[t[0]||(t[0]=(0,o.Lk)("h5",{class:"text-center fw-semibold mb-3"},"Tarefas por Status",-1)),(0,o.Lk)("div",Ma,[(0,o.bF)(i,{chartData:r.chartData,chartOptions:r.chartOptions},null,8,["chartData","chartOptions"])])]),(0,o.Lk)("div",Aa,[t[1]||(t[1]=(0,o.Lk)("h5",{class:"text-center fw-semibold mb-3"},"Tarefas por MÃªs",-1)),(0,o.Lk)("div",Fa,[(0,o.bF)(c,{chartData:r.barChartData,chartOptions:r.barChartOptions},null,8,["chartData","chartOptions"])])]),(0,o.Lk)("div",Xa,[t[2]||(t[2]=(0,o.Lk)("h5",{class:"text-center fw-semibold mb-3"},"ConcluÃ­das por Dia",-1)),(0,o.Lk)("div",$a,[(0,o.bF)(c,{chartData:r.concluidasPorDiaChartData,chartOptions:r.barChartOptions},null,8,["chartData","chartOptions"])])])])]),(0,o.Lk)("div",Oa,[(0,o.Lk)("div",Ia,[t[3]||(t[3]=(0,o.Lk)("h5",{class:"text-center fw-semibold mb-3"},"Tarefas na Semana",-1)),(0,o.Lk)("div",Va,[(0,o.bF)(c,{chartData:r.semanalChartData,chartOptions:r.barChartOptions},null,8,["chartData","chartOptions"])])])]),(0,o.Lk)("div",Na,[t[4]||(t[4]=(0,o.Lk)("h5",{class:"fw-semibold mb-3"},"Progresso Geral",-1)),(0,o.Lk)("div",Wa,[(0,o.Lk)("div",{class:"progress-bar bg-success progress-bar-striped progress-bar-animated",role:"progressbar",style:(0,n.Tr)({width:r.percentualConcluido+"%"}),"aria-valuenow":r.percentualConcluido,"aria-valuemin":"0","aria-valuemax":"100"},(0,n.v_)(r.percentualConcluido)+"% ",13,Ua)])])])}a(7588),a(8237);function Pa(e,t,a,s,n,l){const r=(0,o.g2)("Doughnut");return(0,o.uX)(),(0,o.Wv)(r,{data:a.chartData,options:a.chartOptions},null,8,["data","options"])}var Ba=a(9064),Ra=a(1010);Ba.t1.register(Ba.hE,Ba.m_,Ba.s$,Ba.Bs);var za={name:"DoughnutChart",components:{Doughnut:Ra.nu},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,required:!0}}};const Ka=(0,y.A)(za,[["render",Pa]]);var Ja=Ka;function qa(e,t,a,s,n,l){const r=(0,o.g2)("Line");return(0,o.uX)(),(0,o.Wv)(r,{data:a.chartData,options:a.chartOptions},null,8,["data","options"])}Ba.t1.register(Ba.hE,Ba.m_,Ba.s$,Ba.No,Ba.PP,Ba.kc,Ba.FN,Ba.dN);var Ha={name:"LineChart",components:{Line:Ra.N1},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,required:!0}}};const Qa=(0,y.A)(Ha,[["render",qa]]);var Ya=Qa,Ga={components:{DoughnutChart:Ja,LineChart:Ya},computed:{...(0,p.L8)(["tasks"]),totalTarefas(){return this.tasks.length},tarefasConcluidas(){return this.tasks.filter(e=>e.completed).length},tarefasAFazer(){const e=new Date;return e.setHours(0,0,0,0),this.tasks.filter(t=>{if(t.completed||!t.due_date)return!1;const[a,s,o]=t.due_date.split("/"),n=new Date(+o,+s-1,+a);return n.setHours(0,0,0,0),n>=e}).length},tarefasAtrasadas(){const e=new Date;return e.setHours(0,0,0,0),this.tasks.filter(t=>{if(t.completed||!t.due_date)return!1;const[a,s,o]=t.due_date.split("/"),n=new Date(+o,+s-1,+a);return n.setHours(0,0,0,0),n<e}).length},porcentagemAntesDoPrazo(){const e=this.tasks.filter(e=>e.completed&&e.due_date&&e.updated_at);if(0===e.length)return 0;const t=e.filter(e=>{const[t,a,s]=e.due_date.split("/"),o=new Date(+s,+a-1,+t);o.setHours(23,59,59,999);const n=new Date(e.updated_at);return n<=o}).length;return(t/e.length*100).toFixed(1)},tempoMedioConclusao(){const e=this.tasks.filter(e=>e.completed&&e.created_at&&e.updated_at).map(e=>{const t=new Date(e.created_at),a=new Date(e.updated_at),s=a-t,o=s/864e5;return o});if(0===e.length)return 0;const t=e.reduce((e,t)=>e+t,0);return(t/e.length).toFixed(1)},percentualConcluido(){return 0===this.totalTarefas?0:(this.tarefasConcluidas/this.totalTarefas*100).toFixed(1)},chartData(){return{labels:["ConcluÃ­das","Ã€ Fazer","Atrasadas"],datasets:[{data:[this.tarefasConcluidas,this.tarefasAFazer,this.tarefasAtrasadas],backgroundColor:["#28a745","#ffc107","#dc3545"]}]}},chartOptions(){return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}},barChartData(){const e=Array(12).fill(0);return this.tasks.forEach(t=>{if(!t.due_date)return;const[a,s,o]=t.due_date.split("/"),n=new Date(+o,+s-1,+a),l=n.getMonth();e[l]++}),{labels:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],datasets:[{label:"Tarefas por mÃªs",data:e,backgroundColor:"#007bff"}]}},concluidasPorDiaChartData(){const e={};this.tasks.forEach(t=>{if(t.completed&&t.updated_at){const a=t.updated_at.split("T")[0];e[a]=(e[a]||0)+1}});const t=Object.keys(e).sort(),a=t.map(t=>e[t]);return{labels:t,datasets:[{label:"ConcluÃ­das por dia",data:a,backgroundColor:"#28a745"}]}},semanalChartData(){const e=["Dom","Seg","Ter","Qua","Qui","Sex","SÃ¡b"],t=[],a=new Date;a.setHours(0,0,0,0);for(let s=6;s>=0;s--){const o=new Date(a);o.setDate(o.getDate()-s);const n=o.toISOString().split("T")[0],l=e[o.getDay()];t.push({data:n,nomeDia:l,concluidas:0,pendentes:0,atrasadas:0})}return this.tasks.forEach(e=>{if(!e.due_date)return;const[s,o,n]=e.due_date.split("/"),l=new Date(+n,+o-1,+s);l.setHours(0,0,0,0),t.forEach(t=>{l.toISOString().split("T")[0]===t.data&&(e.completed?t.concluidas++:l<a?t.atrasadas++:t.pendentes++)})}),{labels:t.map(e=>e.nomeDia),datasets:[{label:"ConcluÃ­das",data:t.map(e=>e.concluidas),backgroundColor:"#28a745",stack:"Stack 0"},{label:"Pendentes",data:t.map(e=>e.pendentes),backgroundColor:"#ffc107",stack:"Stack 0"},{label:"Atrasadas",data:t.map(e=>e.atrasadas),backgroundColor:"#dc3545",stack:"Stack 0"}]}},barChartOptions(){return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1},ticks:{display:!0}},y:{grid:{display:!1},ticks:{display:!0}}}}},stats(){return[{label:"Total",value:this.totalTarefas},{label:"ConcluÃ­das",value:this.tarefasConcluidas},{label:"Ã€ Fazer",value:this.tarefasAFazer},{label:"Atrasadas",value:this.tarefasAtrasadas},{label:"Tempo MÃ©dio",value:this.tempoMedioConclusao},{label:"Antecipadas",value:this.porcentagemAntesDoPrazo+"%"}]}},methods:{...(0,p.i0)(["fetchTasks"])},created(){this.fetchTasks()}};const Za=(0,y.A)(Ga,[["render",ja],["__scopeId","data-v-39e8c6e5"]]);var es=Za;const ts={class:"d-flex justify-content-center align-items-center min-vh-100 bg-light"},as={class:"card shadow-lg border-0 m-3",style:{"max-width":"420px",width:"100%"}},ss={class:"card-body p-5"},os={class:"mb-3"},ns={class:"mb-3"},ls={class:"d-grid"},rs=["disabled"],is={class:"text-center mt-4"};var cs={__name:"Login",setup(e){const t=(0,p.Pj)(),a=(0,_.rd)(),n=(0,Xe.KR)(""),l=(0,Xe.KR)(""),r=(0,Xe.KR)(!1),i=async()=>{t.commit("setLoadingTrue");try{await t.dispatch("login",{email:n.value,password:l.value}),await t.dispatch("fetchUser"),await t.dispatch("fetchTasks"),t.commit("setLoadingFalse"),a.push("/home")}catch(e){console.error("Erro ao fazer login:"),t.commit("setLoadingFalse")}};return(e,t)=>{const a=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",ts,[(0,o.Lk)("div",as,[(0,o.Lk)("div",ss,[t[6]||(t[6]=(0,o.Lk)("h2",{class:"text-center fw-bold mb-4"},"Login",-1)),t[7]||(t[7]=(0,o.Lk)("p",{class:"text-center text-muted mb-4"},"Entre com suas credenciais para acessar",-1)),(0,o.Lk)("form",{onSubmit:(0,s.D$)(i,["prevent"])},[(0,o.Lk)("div",os,[t[2]||(t[2]=(0,o.Lk)("label",{for:"email",class:"form-label fw-semibold"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),type:"email",id:"email",class:"form-control form-control-lg",placeholder:"Digite seu email",required:""},null,512),[[s.Jo,n.value]])]),(0,o.Lk)("div",ns,[t[3]||(t[3]=(0,o.Lk)("label",{for:"password",class:"form-label fw-semibold"},"Senha",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),type:"password",id:"password",class:"form-control form-control-lg",placeholder:"Digite sua senha",required:""},null,512),[[s.Jo,l.value]])]),(0,o.Lk)("div",ls,[(0,o.Lk)("button",{type:"submit",class:"btn-enter",disabled:r.value},[...t[4]||(t[4]=[(0,o.Lk)("span",null,"Entrar",-1)])],8,rs)])],32),(0,o.Lk)("div",is,[(0,o.bF)(a,{to:"/register",class:"text-decoration-none fw-semibold"},{default:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)(" NÃ£o tem uma conta? ",-1),(0,o.Lk)("span",{class:"text-primary"},"Crie agora",-1)])]),_:1})])])]),(0,o.bF)(Pe,{loading:r.value},null,8,["loading"])])}}};const ds=(0,y.A)(cs,[["__scopeId","data-v-640c8f04"]]);var us=ds;const ms={class:"d-flex justify-content-center align-items-center min-vh-100 bg-light"},ks={class:"card shadow-lg border-0 m-3",style:{"max-width":"420px",width:"100%"}},hs={class:"card-body p-5"},ps={class:"mb-3"},bs={class:"mb-3"},fs={class:"mb-3"},gs={class:"d-grid"},vs=["disabled"],Ls={key:0},ys={key:1},ws={class:"text-center mt-4"};var Cs={__name:"Register",setup(e){const t=(0,_.rd)(),a=(0,Xe.KR)(""),n=(0,Xe.KR)(""),l=(0,Xe.KR)(""),r=(0,Xe.KR)(!1),i=async()=>{r.value=!0;try{const e=await Jt.post("/register",{name:a.value,email:n.value,password:l.value});(e.data?.user||e.data?.token)&&t.replace("/login")}catch(e){console.error("Erro ao cadastrar:")}finally{r.value=!1}};return(e,t)=>{const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",ms,[(0,o.Lk)("div",ks,[(0,o.Lk)("div",hs,[t[7]||(t[7]=(0,o.Lk)("h2",{class:"text-center fw-bold mb-4"},"Criar Conta",-1)),t[8]||(t[8]=(0,o.Lk)("p",{class:"text-center text-muted mb-4"},"Preencha os campos para se cadastrar",-1)),(0,o.Lk)("form",{onSubmit:(0,s.D$)(i,["prevent"])},[(0,o.Lk)("div",ps,[t[3]||(t[3]=(0,o.Lk)("label",{for:"name",class:"form-label fw-semibold"},"Nome",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),type:"text",id:"name",class:"form-control form-control-lg",placeholder:"Digite seu nome",required:""},null,512),[[s.Jo,a.value]])]),(0,o.Lk)("div",bs,[t[4]||(t[4]=(0,o.Lk)("label",{for:"email",class:"form-label fw-semibold"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),type:"email",id:"email",class:"form-control form-control-lg",placeholder:"Digite seu email",required:""},null,512),[[s.Jo,n.value]])]),(0,o.Lk)("div",fs,[t[5]||(t[5]=(0,o.Lk)("label",{for:"password",class:"form-label fw-semibold"},"Senha",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.value=e),type:"password",id:"password",class:"form-control form-control-lg",placeholder:"Crie uma senha",required:""},null,512),[[s.Jo,l.value]])]),(0,o.Lk)("div",gs,[(0,o.Lk)("button",{type:"submit",class:"btn-register",disabled:r.value},[r.value?((0,o.uX)(),(0,o.CE)("span",ys,"â³ Cadastrando...")):((0,o.uX)(),(0,o.CE)("span",Ls,"Cadastrar"))],8,vs)])],32),(0,o.Lk)("div",ws,[(0,o.bF)(c,{to:"/login",class:"text-decoration-none fw-semibold"},{default:(0,o.k6)(()=>[...t[6]||(t[6]=[(0,o.eW)(" JÃ¡ tem conta? ",-1),(0,o.Lk)("span",null,"Entrar",-1)])]),_:1})])])])])}}};const Ts=(0,y.A)(Cs,[["__scopeId","data-v-01461b58"]]);var xs=Ts;const Ds={class:"container py-4"},_s={class:"mb-4 d-flex justify-content-between align-items-center"},Ss={class:"custom-btn list-unstyled"},Es={class:"row g-4 mb-5"},Ms={class:"col-md-4"},As={class:"card shadow-sm border-0"},Fs={class:"card-body text-center"},Xs={class:"display-6 text-primary fw-bold mb-0"},$s={class:"col-md-4"},Os={class:"card shadow-sm border-0"},Is={class:"card-body text-center"},Vs={class:"display-6 text-success fw-bold mb-0"},Ns={class:"col-md-4"},Ws={class:"card shadow-sm border-0"},Us={class:"card-body text-center"},js={class:"display-6 text-warning fw-bold mb-0"},Ps={class:"card shadow-sm border-0"},Bs={class:"card-body"},Rs={class:"table-responsive"},zs={class:"table table-hover align-middle"},Ks=["onClick"];var Js={__name:"Admin",setup(e){const t=(0,Xe.KR)([]),a=(0,Xe.KR)({total_users:0,online_users:0,admins:0}),l=(0,p.Pj)(),r=(0,_.rd)();function i(e){return e?new Date(e).toLocaleDateString("pt-BR",{timeZone:"America/Sao_Paulo",day:"2-digit",month:"2-digit",year:"numeric"}):"-"}async function c(){try{const e=await v.A.get("/api/admin/users");t.value=e.data.users;const s=await v.A.get("/api/admin/stats");a.value=s.data}catch(e){alert("Erro ao carregar dados do admin")}}async function d(e){if(confirm("Tem certeza que deseja excluir este usuÃ¡rio?"))try{await v.A.delete(`/api/admin/users/${e}`),t.value=t.value.filter(t=>t.id!==e)}catch(a){alert("Erro ao excluir usuÃ¡rio")}}async function u(){await l.dispatch("logout"),r.push("/login")}return(0,o.sV)(()=>{c()}),(e,l)=>((0,o.uX)(),(0,o.CE)("div",Ds,[(0,o.Lk)("div",_s,[l[1]||(l[1]=(0,o.Lk)("div",null,[(0,o.Lk)("h1",{class:"fw-bold"},"Painel Administrativo"),(0,o.Lk)("p",{class:"text-muted"},"Gerencie usuÃ¡rios e visualize estatÃ­sticas do sistema")],-1)),(0,o.Lk)("li",Ss,[(0,o.Lk)("a",{href:"#",onClick:(0,s.D$)(u,["prevent"]),class:"text-decoration-none fw-bold"},[...l[0]||(l[0]=[(0,o.Lk)("i",{class:"fas fa-right-from-bracket"},null,-1),(0,o.eW)(" Sair ",-1)])])])]),(0,o.Lk)("div",Es,[(0,o.Lk)("div",Ms,[(0,o.Lk)("div",As,[(0,o.Lk)("div",Fs,[l[2]||(l[2]=(0,o.Lk)("h5",{class:"card-title text-muted"},"Total de UsuÃ¡rios",-1)),(0,o.Lk)("p",Xs,(0,n.v_)(a.value.total_users),1)])])]),(0,o.Lk)("div",$s,[(0,o.Lk)("div",Os,[(0,o.Lk)("div",Is,[l[3]||(l[3]=(0,o.Lk)("h5",{class:"card-title text-muted"},"UsuÃ¡rios Online",-1)),(0,o.Lk)("p",Vs,(0,n.v_)(a.value.online_users),1)])])]),(0,o.Lk)("div",Ns,[(0,o.Lk)("div",Ws,[(0,o.Lk)("div",Us,[l[4]||(l[4]=(0,o.Lk)("h5",{class:"card-title text-muted"},"Administradores",-1)),(0,o.Lk)("p",js,(0,n.v_)(a.value.admins),1)])])])]),(0,o.Lk)("div",Ps,[(0,o.Lk)("div",Bs,[l[6]||(l[6]=(0,o.Lk)("h4",{class:"card-title mb-4"},"Lista de UsuÃ¡rios",-1)),(0,o.Lk)("div",Rs,[(0,o.Lk)("table",zs,[l[5]||(l[5]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"Nome"),(0,o.Lk)("th",null,"Email"),(0,o.Lk)("th",null,"FunÃ§Ã£o"),(0,o.Lk)("th",null,"Ãšltimo login"),(0,o.Lk)("th",null,"Criado em"),(0,o.Lk)("th",null,"FunÃ§Ãµes")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.value,e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[(0,o.Lk)("td",null,(0,n.v_)(e.id),1),(0,o.Lk)("td",null,[(0,o.Lk)("strong",null,(0,n.v_)(e.name),1)]),(0,o.Lk)("td",null,(0,n.v_)(e.email),1),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,n.C4)(["badge",{"bg-primary":"admin"===e.role,"bg-secondary":"admin"!==e.role}])},(0,n.v_)(e.role),3)]),(0,o.Lk)("td",null,(0,n.v_)(i(e.last_login_at)),1),(0,o.Lk)("td",null,(0,n.v_)(i(e.created_at)),1),(0,o.Lk)("td",null,[(0,o.Lk)("button",{class:"btn btn-sm btn-danger",onClick:t=>d(e.id)}," Excluir ",8,Ks)])]))),128))])])])])])]))}};const qs=Js;var Hs=qs,Qs=(0,p.y$)({state(){return{user:Rt.getItem("user")||null,token:Rt.getItem("token")||null,isAuthenticated:!!Rt.getItem("token"),tasks:[],isLoading:!0}},mutations:{setUser(e,t){e.user=t,e.isAuthenticated=!!t,Rt.setItem("user",t)},setToken(e,t){e.token=t,Rt.setItem("token",t),v.A.defaults.headers.common["Authorization"]=`Bearer ${t}`},setTasks(e,t){e.tasks=t},clearTasks(e){e.tasks=[]},setLoading(e,t){e.isLoading=t},setLoadingTrue(e){e.isLoading=!0},setLoadingFalse(e){e.isLoading=!1},logout(e){e.user=null,e.token=null,e.isAuthenticated=!1,e.tasks=[],Rt.removeItem("user"),Rt.removeItem("token"),delete v.A.defaults.headers.common["Authorization"]}},actions:{async login({commit:e,dispatch:t},{email:a,password:s}){try{e("clearTasks"),e("setUser",null),e("setToken",null);const o=await v.A.post("/api/login",{email:a,password:s}),n=o.data.token,l=o.data.user;e("setToken",n),e("setUser",l),"user"===l.role&&await t("fetchTasks")}catch(o){throw console.error("Erro no login:"),o}},async fetchTasks({commit:e}){try{const t=await v.A.get("/api/tasks");e("setTasks",t.data)}catch(t){console.error("Erro ao buscar tarefas"),e("setTasks",[])}},async fetchUser({commit:e,state:t}){if(!t.token)throw new Error("Token ausente");try{const t=await v.A.get("/api/user");e("setUser",t.data)}catch(a){throw console.error("Erro ao buscar usuÃ¡rio"),a}},async checkAuth({commit:e,dispatch:t,state:a}){e("setLoadingTrue");try{a.token?(v.A.defaults.headers.common["Authorization"]=`Bearer ${a.token}`,await t("fetchUser"),"user"===a.user.role&&0===a.tasks.length&&await t("fetchTasks")):e("logout")}catch(s){e("logout")}finally{e("setLoadingFalse")}},logout({commit:e}){e("logout")}},getters:{isAuthenticated:e=>e.isAuthenticated,user:e=>e.user,token:e=>e.token,tasks:e=>e.tasks,isLoading:e=>e.isLoading}});const Ys=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:us},{path:"/register",name:"Register",component:xs},{path:"/home",name:"Home",component:Zt,meta:{requiresAuth:!0,role:"user"}},{path:"/calendario",name:"Calendar",component:La,meta:{requiresAuth:!0,role:"user"}},{path:"/dashboard",name:"Dashboard",component:es,meta:{requiresAuth:!0,role:"user"}},{path:"/admin",name:"Admin",component:Hs,meta:{requiresAuth:!0,role:"admin"}}],Gs=(0,_.aE)({history:(0,_.LA)(),routes:Ys});Gs.beforeEach((e,t,a)=>{const s=Qs.getters.isAuthenticated,o=Qs.getters.user;if(e.meta.requiresAuth&&!s)return a("/login");if(s&&("/login"===e.path||"/register"===e.path))return a("admin"===o?.role?"/admin":"/home");if(e.meta.role){if(!o)return a();if(o.role!==e.meta.role)return a("admin"===o.role?"/admin":"/home")}a()});var Zs=Gs;a(323);v.A.defaults.baseURL="https://my-taskly-production.up.railway.app";const eo=Rt.getItem("token");eo&&(v.A.defaults.headers.common["Authorization"]=`Bearer ${eo}`);const to=(0,s.Ef)(D);to.use(Qs),to.use(Zs),to.mount("#app")}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,n){if(!s){var l=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],n=e[d][2];for(var r=!0,i=0;i<s.length;i++)(!1&n||l>=n)&&Object.keys(a.O).every(function(e){return a.O[e](s[i])})?s.splice(i--,1):(r=!1,n<l&&(l=n));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,l=s[0],r=s[1],i=s[2],c=0;if(l.some(function(t){return 0!==e[t]})){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(i)var d=i(a)}for(t&&t(s);c<l.length;c++)n=l[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},s=self["webpackChunktodolist_frontend"]=self["webpackChunktodolist_frontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],function(){return a(9439)});s=a.O(s)})();